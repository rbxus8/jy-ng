;/*FB_PKG_DELIM*/

__d("usePrefetchRouteDefinition",["PolarisMonitorErrors","react","useCometRouterDispatcher"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(a){var b=c("useCometRouterDispatcher")();h(function(){try{b==null?void 0:b.prefetchRouteDefinition(a)}catch(a){d("PolarisMonitorErrors").logError(a)}},[a,b])}g["default"]=a}),98);
__d("PolarisDesktopPostLoadingShimmer.react",["cx","PolarisIGTheme.react","PolarisReactRedux","PolarisSizing","PolarisStyleConstants","PolarispostModalHelpers","PolarispostSelectors","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function j(a){var b,e=a.dimensions,f=a.postId,g=a.viewportHeight;a=a.viewportWidth;var h=a!=null&&a>c("PolarisStyleConstants")["medium-screen-min"].value;b=(b=d("PolarisReactRedux").useSelector(function(a){return d("PolarispostSelectors").getPostOrNullById(a,(a=f)!=null?a:"")}))==null?void 0:b.isSponsored;a=d("PolarispostModalHelpers").getMediaContainerProps({dimensions:e,viewportHeight:(g=g)!=null?g:0,viewportWidth:(g=a)!=null?g:0,hasSidebarInRedesign:h,hasFooter:b});return i.jsx("div",babelHelpers["extends"]({className:"_aas3"+(h&&e!=null&&e.width>=e.height?" _aas4":"")},a,{children:i.jsx(k,{dimensions:e})}))}j.displayName=j.name+" [from "+f.id+"]";function k(a){a=a.dimensions;var b={},c=d("PolarisIGTheme.react").useTheme();a&&(b.paddingBottom=d("PolarisSizing").getHeightPercent(a)+"%");return i.jsx("div",{className:"_aas5"+(c.getTheme()===d("PolarisIGTheme.react").IGTheme.Dark?" _aas6":""),style:b})}k.displayName=k.name+" [from "+f.id+"]";function l(a){var b=a.dimensions;a.onExitModal;var c=a.postId,d=a.viewportHeight;a=a.viewportWidth;return i.jsx(j,{dimensions:b,postId:c,viewportHeight:d,viewportWidth:a})}l.displayName=l.name+" [from "+f.id+"]";function a(a){a.className;var b=a.dimensions,c=a.onExitModal,d=a.postId,e=a.viewportHeight;a=a.viewportWidth;var f={};b&&(f={flexDirection:"row"});return i.jsxs("div",{className:"_aas7",style:f,children:[i.jsx(l,{dimensions:b,onExitModal:c,postId:d,viewportHeight:e,viewportWidth:a}),i.jsxs("div",{className:"_aas8",children:[i.jsxs("div",{className:"_aas9",children:[i.jsx("div",{className:"_aasa"}),i.jsxs("div",{className:"_aasb",children:[i.jsx("div",{className:"_aasc"}),i.jsx("div",{className:"_aasd"})]})]}),i.jsxs("div",{className:"_aase",children:[i.jsx("div",{className:"_aasf"}),i.jsx("div",{className:"_aasg"}),i.jsx("div",{className:"_aash"})]})]})]})}a.displayName=a.name+" [from "+f.id+"]";g.SIDEBAR_VARIANT_CUTOFF=c("PolarisStyleConstants")["medium-screen-min"].value;g.DesktopPostLoadingShimmer=a}),98);
__d("PolarisPostModalLoading.react",["PolarisDesktopPostLoadingShimmer.react","PolarisIGCoreBox","PolarisIGCoreSpinner","PolarisPostConstants","PolarisUA","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.dimensions,e=a.onExitModal,f=a.postId,g=a.viewportHeight;a=a.viewportWidth;return d("PolarisUA").isDesktop()&&a>d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF?h.jsx(d("PolarisDesktopPostLoadingShimmer.react").DesktopPostLoadingShimmer,{dimensions:b,onExitModal:e,postId:f,viewportHeight:g,viewportWidth:a}):h.jsx(c("PolarisIGCoreBox"),{alignItems:"center",children:h.jsx(c("PolarisIGCoreSpinner"),{color:"light",size:"medium"})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostModalPaginationArrow.react",["cx","PolarisGenericStrings","PolarisIGCoreChevronIcon","PolarisIGCoreSVGIconButton","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){a.arrowRef;var b=a.direction,e=a.onClick;a.title;a=b==="left";var f=b==="right";return i.jsx("div",{className:(a?"_aaqf":"")+(f?" _aaqg":"")+" _aaqh",children:i.jsx(c("PolarisIGCoreSVGIconButton"),{onClick:e,children:i.jsx(c("PolarisIGCoreChevronIcon"),{alt:a?d("PolarisGenericStrings").GO_BACK:d("PolarisGenericStrings").NEXT,color:"web-always-black",direction:b,size:16})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostModal.react",["cx","IGCoreModal","IGCoreModalLocation","PolarisAutoplayViewpointManager.react","PolarisDOMListener.react","PolarisLogger","PolarisPostActions","PolarisPostModalLoading.react","PolarisPostModalPaginationArrow.react","PolarisPostModalRenderingContext","PolarisReactRedux","PolarisRoutes","PolarisisUserLoggedIn","PolarispostModalHelpers","PolarispostSelectors","getPolarisKeyCommandConfig","nullthrows","react","useGlobalKeyCommands"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useCallback,k=b.useEffect,l=b.useMemo,m=b.useRef,n={isInModal:!0};function a(a){var b=a.analyticsContext,e=a.children,f=a.combinedPostIds,g=f===void 0?[]:f;f=a["data-testid"];f=a.dimensions;var h=a.mediaLinkBuilder,o=a.modalEntryPath;o=o===void 0?d("PolarisRoutes").FEED_PATH:o;var p=a.onClose,q=a.onOpen,r=a.onlyReplaceModalHistory,s=a.postCode,t=a.postId,u=d("PolarisReactRedux").useDispatch(),v=m(null);a=d("PolarisReactRedux").useSelector(function(a){return d("PolarispostSelectors").getAreCommentsFetched(a,t)});var w=d("PolarisReactRedux").useSelector(function(a){return d("PolarispostSelectors").getIsPostDataFetched(a,s)}),x=d("PolarisisUserLoggedIn").isUserLoggedIn()===!0?w:w&&a;w=j(function(){x||u(d("PolarisPostActions").loadPost(s,t))},[x,s,t,u]);k(w,[w]);var y=g.findIndex(function(a){return a===t}),z=j(function(a){return a>=0&&a<g.length},[g.length]),A=j(function(a){a=y+a;z(a)&&q&&q(c("nullthrows")(g[a]),a)},[g,y,z,q]),B=j(function(a){p(a),v.current!=null&&v.current.returnToEntry()},[p]);a=l(function(){return[d("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("postModal","navigateLeft",function(){A(d("PolarispostModalHelpers").LEFT_DELTA)}),d("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("postModal","navigateRight",function(){A(d("PolarispostModalHelpers").RIGHT_DELTA)}),d("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("postModal","exit",function(){B()})]},[A,B]);c("useGlobalKeyCommands")(a);w=function(a){return function(b){if(b.metaKey||b.ctrlKey)return;b.preventDefault();b.stopPropagation();A(a);d("PolarisLogger").logAction("postModalArrowClick")}};a=j(function(){var a=d("PolarispostModalHelpers").getModalPageIdFromAnalyticsContext(b);a.length>0&&d("PolarisLogger").logPageView(a,{post_id:t,page_id:a})},[b,t]);var C=z(y-1),D=z(y+1);C=i.jsx("div",{className:"_aeap _aeaq",children:i.jsxs("div",{className:"_aear",children:[C&&i.jsx(c("PolarisPostModalPaginationArrow.react"),{direction:"left",onClick:w(d("PolarispostModalHelpers").LEFT_DELTA),title:d("PolarispostModalHelpers").PREVIOUS_ARROW_TITLE}),D&&i.jsx(c("PolarisPostModalPaginationArrow.react"),{direction:"right",onClick:w(d("PolarispostModalHelpers").RIGHT_DELTA),title:d("PolarispostModalHelpers").NEXT_ARROW_TITLE})]})});D=d("PolarisReactRedux").useSelector(function(a){return a.displayProperties.viewportWidth});w=d("PolarisReactRedux").useSelector(function(a){return a.displayProperties.viewportHeight});e=i.jsx(i.Fragment,{children:x?e:i.jsx(c("PolarisPostModalLoading.react"),{dimensions:f,postId:t,viewportHeight:w,viewportWidth:D})});f=i.jsx(c("IGCoreModal"),{aboveContent:C,backgroundColor:"DEPRECATED_transparent",closeButtonPosition:"background","data-testid":void 0,onClose:B,size:"fullscreenResponsive",children:e});return i.jsxs(i.Fragment,{children:[i.jsx(d("PolarisAutoplayViewpointManager.react").FullscreenAutoplayViewpointClipRegion,{id:"postModal"}),i.jsx(c("IGCoreModalLocation"),{entryPath:o,nativeReplace:!0,onlyReplaceModalHistory:r,onUpdateHistory:a,pageID:"postPage",parentModule:"PolarisPostModal",path:h(s),ref:v}),i.jsx(c("PolarisDOMListener.react"),{event:"popstate",handler:B,once:!0,target:window}),i.jsx(d("PolarisPostModalRenderingContext").PolarisPostModalRenderingContext.Provider,{value:n,children:f})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisMediaBrowserPostModal.react",["invariant","PolarisPost.react","PolarisPostModal.react","PolarisPostVariants","PolarisQEHelper","PolarisReactRedux","PolarisRoutes","PolarispostSelectors","nullthrows","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useEffect;function a(a){var b=a.analyticsContext,e=a.combinedPosts,f=a.mediaLinkBuilder,g=a.modalEntryPath,k=a.onClose,l=a.onImpression,m=a.onOpen,n=a.postId,o=d("PolarisReactRedux").useSelector(function(a){return d("PolarispostSelectors").getDeletedIds(a)});a=e.map(function(a){return a.id});var p=d("PolarisReactRedux").useSelector(function(a){return d("PolarispostSelectors").getPostOrNullById(a,n)});j(function(){p==null&&(o.includes(n)||h(0,51476),k())},[o,k,p,n]);return p==null?null:i.jsx(c("PolarisPostModal.react"),{analyticsContext:b,combinedPostIds:a,dimensions:p.dimensions,mediaLinkBuilder:f,modalEntryPath:g!=null&&g!==""?g:d("PolarisRoutes").FEED_PATH,onClose:k,onOpen:m,postCode:c("nullthrows")(p.code),postId:n,children:i.jsx(c("PolarisPost.react"),{analyticsContext:b+"Modal",autoplay:d("PolarisQEHelper").hasAutoplayEnabledOnPosts(),id:n,isVisible:!0,onImpression:l,variant:d("PolarisPostVariants").VARIANTS.flexible,visiblePosition:0})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisClipsItemModal.react",["IGRouter","PolarisClipsHelpers","PolarisLinkBuilder","PolarisPost.react","PolarisPostModal.react","PolarisPostVariants","nullthrows","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useRef;function a(a){var b=a.analyticsContext,e=a.clips,f=a.history,g=a.onClose,j=a.onOpen;a=a.postId;f=i(f.location.pathname);var k=d("PolarisClipsHelpers").getClipItemFromPostID(e,a);if(!k)return null;e=e.map(function(a){return c("nullthrows")(a.media.pk)});return h.jsx(c("PolarisPostModal.react"),{analyticsContext:b,combinedPostIds:e,dimensions:d("PolarisClipsHelpers").getClipDimensionsFromItemDict(k),mediaLinkBuilder:d("PolarisLinkBuilder").buildClipsMediaLink,modalEntryPath:f.current,onClose:g,onOpen:j,postCode:c("nullthrows")(k.media.code),postId:a,children:h.jsx(c("PolarisPost.react"),{analyticsContext:b+"Modal",autoplay:!0,id:a,isVisible:!0,variant:d("PolarisPostVariants").VARIANTS.flexible,visiblePosition:0})})}a.displayName=a.name+" [from "+f.id+"]";b=d("IGRouter").withIGRouter(a);g["default"]=b}),98);